<p>算是一个 ssh 的小 trick</p>
<p>有的时候我们在开发过程中是 ssh 连接远程开发服务器完成的，这个时候启动服务，往往就会开一个</p>
<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code class="language-shell"><span class="line"><span style="color:#59873A;--shiki-dark:#80A665">  ➜</span><span style="color:#B56959;--shiki-dark:#C98A7D">  Local:</span><span style="color:#B56959;--shiki-dark:#C98A7D">   http://localhost:5173/</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">  ➜</span><span style="color:#B56959;--shiki-dark:#C98A7D">  Network:</span><span style="color:#B56959;--shiki-dark:#C98A7D"> http://</span><span style="color:#A65E2B;--shiki-dark:#C99076">***</span><span style="color:#B56959;--shiki-dark:#C98A7D">.</span><span style="color:#A65E2B;--shiki-dark:#C99076">**</span><span style="color:#B56959;--shiki-dark:#C98A7D">.</span><span style="color:#A65E2B;--shiki-dark:#C99076">***</span><span style="color:#B56959;--shiki-dark:#C98A7D">.0:5173/</span></span></code></pre>
<p>之类的服务在服务器上</p>
<p>如果服务器有公网 IP，那自然可以通过公网 IP 来访问，当没有公网 IP 我们又需要在本地预览效果时呢？</p>
<p>其实也可以通过 ssh 完成</p>
<!-- more -->
<p>简单来说，ssh 绑定本地的某个端口到远程服务器的服务端口即可，这样本地即可访问远程服务器提供的服务</p>
<p>以上需求对应：</p>
<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code class="language-shell"><span class="line"><span style="color:#59873A;--shiki-dark:#80A665">ssh</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -i</span><span style="color:#B56959;--shiki-dark:#C98A7D"> ~/.../密钥文件.pem</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -N</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -L</span><span style="color:#B56959;--shiki-dark:#C98A7D"> 本地port:127.0.0.1:服务器port</span><span style="color:#B56959;--shiki-dark:#C98A7D"> root@服务器url或IP</span></span></code></pre>
<p>其中 <code>127.0.0.1</code> 也即为本地的 localhost 地址，这样我们就可以通过本地的 <code>localhost:port</code> 或者 <code>127.0.0.1:port</code> 来访问远程服务</p>
<h2 id="%E6%B3%A8%E6%84%8F" tabindex="-1">注意</h2>
<p>需要注意的是，远程服务需要在 0.0.0.0 上启动，该 IP 可用于外部网络接口</p>
<p>例如，对于 <code>Vite</code> 而言：</p>
<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code class="language-shell"><span class="line"><span style="color:#59873A;--shiki-dark:#80A665">pnpm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> dev</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --host</span><span style="color:#2F798A;--shiki-dark:#4C9A91"> 0.0.0.0</span></span></code></pre>
<p>添加 <code>--host</code> 参数以指定</p>
<p>这样一来本地网页就可以看到预览了</p>
<h2 id="%E7%94%A8%E9%80%94" tabindex="-1">用途</h2>
<p>多端都可以预览，例如安卓可以使用 <code>termux</code> 来使用 <code>ssh</code>，这下有个安卓板子就可以开发了</p>
<ul>
<li>VSCode 有网页版好文明</li>
<li><s>Electron 是坏文明</s></li>
<li><s>苹果板子应该也可以，但我没有</s></li>
</ul>
<h2 id="ssh-%E5%85%B6%E4%BB%96%E7%94%A8%E9%80%94" tabindex="-1">SSH 其他用途</h2>
<p>还可以用来做 <code>proxy</code> 或者使用跳板机</p>
<p>直接抄 <code>tldr</code> 了</p>
<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code class="language-shell"><span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD"># 代理</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">-</span><span style="color:#B56959;--shiki-dark:#C98A7D"> SSH</span><span style="color:#B56959;--shiki-dark:#C98A7D"> tunneling:</span><span style="color:#B56959;--shiki-dark:#C98A7D"> Dynamic</span><span style="color:#B56959;--shiki-dark:#C98A7D"> port</span><span style="color:#B56959;--shiki-dark:#C98A7D"> forwarding</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE"> (SOCKS </span><span style="color:#B56959;--shiki-dark:#C98A7D">proxy</span><span style="color:#B56959;--shiki-dark:#C98A7D"> on</span><span style="color:#999999;--shiki-dark:#666666"> `</span><span style="color:#59873A;--shiki-dark:#80A665">localhost:1080</span><span style="color:#999999;--shiki-dark:#666666">`</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">):</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">  ssh</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -D</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{</span><span style="color:#2F798A;--shiki-dark:#4C9A91">1080</span><span style="color:#B56959;--shiki-dark:#C98A7D">}}</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{username}}@{{remote_host}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD"># 端口转发</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">-</span><span style="color:#B56959;--shiki-dark:#C98A7D"> SSH</span><span style="color:#B56959;--shiki-dark:#C98A7D"> tunneling:</span><span style="color:#B56959;--shiki-dark:#C98A7D"> Forward</span><span style="color:#B56959;--shiki-dark:#C98A7D"> a</span><span style="color:#B56959;--shiki-dark:#C98A7D"> specific</span><span style="color:#B56959;--shiki-dark:#C98A7D"> port</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE"> (</span><span style="color:#999999;--shiki-dark:#666666">`</span><span style="color:#59873A;--shiki-dark:#80A665">localhost:9999</span><span style="color:#999999;--shiki-dark:#666666">`</span><span style="color:#59873A;--shiki-dark:#80A665"> to</span><span style="color:#999999;--shiki-dark:#666666"> `</span><span style="color:#59873A;--shiki-dark:#80A665">example.org:80</span><span style="color:#999999;--shiki-dark:#666666">`</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">) along with disabling pseudo-[T]ty allocation and executio[N] of remote commands:</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">  ssh</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -L</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{</span><span style="color:#2F798A;--shiki-dark:#4C9A91">9999</span><span style="color:#B56959;--shiki-dark:#C98A7D">}}:{{example.org}}:{{</span><span style="color:#2F798A;--shiki-dark:#4C9A91">80</span><span style="color:#B56959;--shiki-dark:#C98A7D">}}</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -N</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -T</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{username}}@{{remote_host}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD"># 使用跳板机</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">-</span><span style="color:#B56959;--shiki-dark:#C98A7D"> SSH</span><span style="color:#B56959;--shiki-dark:#C98A7D"> jumping:</span><span style="color:#B56959;--shiki-dark:#C98A7D"> Connect</span><span style="color:#B56959;--shiki-dark:#C98A7D"> through</span><span style="color:#B56959;--shiki-dark:#C98A7D"> a</span><span style="color:#B56959;--shiki-dark:#C98A7D"> jumphost</span><span style="color:#B56959;--shiki-dark:#C98A7D"> to</span><span style="color:#B56959;--shiki-dark:#C98A7D"> a</span><span style="color:#B56959;--shiki-dark:#C98A7D"> remote</span><span style="color:#B56959;--shiki-dark:#C98A7D"> server</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE"> (Multiple </span><span style="color:#B56959;--shiki-dark:#C98A7D">jump</span><span style="color:#B56959;--shiki-dark:#C98A7D"> hops</span><span style="color:#B56959;--shiki-dark:#C98A7D"> may</span><span style="color:#B56959;--shiki-dark:#C98A7D"> be</span><span style="color:#B56959;--shiki-dark:#C98A7D"> specified</span><span style="color:#B56959;--shiki-dark:#C98A7D"> separated</span><span style="color:#B56959;--shiki-dark:#C98A7D"> by</span><span style="color:#B56959;--shiki-dark:#C98A7D"> comma</span><span style="color:#B56959;--shiki-dark:#C98A7D"> characters</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">):</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">  ssh</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -J</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{username}}@{{jump_host}}</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{username}}@{{remote_host}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD"># SSH Key 自动继承</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">-</span><span style="color:#B56959;--shiki-dark:#C98A7D"> Agent</span><span style="color:#B56959;--shiki-dark:#C98A7D"> forwarding:</span><span style="color:#B56959;--shiki-dark:#C98A7D"> Forward</span><span style="color:#B56959;--shiki-dark:#C98A7D"> the</span><span style="color:#B56959;--shiki-dark:#C98A7D"> authentication</span><span style="color:#B56959;--shiki-dark:#C98A7D"> information</span><span style="color:#B56959;--shiki-dark:#C98A7D"> to</span><span style="color:#B56959;--shiki-dark:#C98A7D"> the</span><span style="color:#B56959;--shiki-dark:#C98A7D"> remote</span><span style="color:#B56959;--shiki-dark:#C98A7D"> machine</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE"> (see </span><span style="color:#999999;--shiki-dark:#666666">`</span><span style="color:#59873A;--shiki-dark:#80A665">man</span><span style="color:#B56959;--shiki-dark:#C98A7D"> ssh_config</span><span style="color:#999999;--shiki-dark:#666666">`</span><span style="color:#1E754F;--shiki-dark:#4D9375"> for</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE"> available options):</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">  ssh</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -A</span><span style="color:#B56959;--shiki-dark:#C98A7D"> {{username}}@{{remote_host}}</span></span></code></pre>
