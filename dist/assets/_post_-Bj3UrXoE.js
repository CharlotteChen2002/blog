import{_ as t}from"./CommonFooter.vue_vue_type_script_setup_true_lang-DUozjMgc.js";import{L as e}from"./loading-loop_width_48px_height_48px-CUHBSXhT.js";import{Y as n,J as s,x as o,v as r,d as a,N as l,O as i,h as u,Q as c,Z as d,z as p,_ as m,F as g,P as h,V as f,w as b,c as v,a as y,b as _,u as k,$ as x,o as S,E as w,G as C,X as P,H as $,f as z,t as I,B as j,I as A,a0 as R,j as B,a1 as M,a2 as E,a3 as D,a4 as L,a5 as N,a6 as T,C as H,a7 as O}from"./index-HlkTBHEd.js";import{_ as U}from"./Tag-Cc370ppb.js";let F=!1;const V={name:"Skeleton",common:s,self:function(t){const{heightSmall:e,heightMedium:n,heightLarge:s,borderRadius:o}=t;return{color:"#eee",colorEnd:"#ddd",borderRadius:o,heightSmall:e,heightMedium:n,heightLarge:s}}},q=o([r("skeleton","\n height: 1em;\n width: 100%;\n transition:\n --n-color-start .3s var(--n-bezier),\n --n-color-end .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);\n background-color: var(--n-color-start);\n "),o("@keyframes skeleton-loading","\n 0% {\n background: var(--n-color-start);\n }\n 40% {\n background: var(--n-color-end);\n }\n 80% {\n background: var(--n-color-start);\n }\n 100% {\n background: var(--n-color-start);\n }\n ")]),G=a({name:"Skeleton",inheritAttrs:!1,props:Object.assign(Object.assign({},i.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}}),setup(t){!function(){if(n&&window.CSS&&!F&&(F=!0,"registerProperty"in(null===window||void 0===window?void 0:window.CSS)))try{CSS.registerProperty({name:"--n-color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--n-color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})}catch(t){}}();const{mergedClsPrefixRef:e}=l(t),s=i("Skeleton","-skeleton",q,V,t,e);return{mergedClsPrefix:e,style:u((()=>{var e,n;const o=s.value,{common:{cubicBezierEaseInOut:r}}=o,a=o.self,{color:l,colorEnd:i,borderRadius:u}=a;let p;const{circle:m,sharp:g,round:h,width:f,height:b,size:v,text:y,animated:_}=t;void 0!==v&&(p=a[c("height",v)]);const k=m?null!==(e=null!=f?f:b)&&void 0!==e?e:p:f,x=null!==(n=m&&null!=f?f:b)&&void 0!==n?n:p;return{display:y?"inline-block":"",verticalAlign:y?"-0.125em":"",borderRadius:m?"50%":h?"4096px":g?"":u,width:"number"==typeof k?d(k):k,height:"number"==typeof x?d(x):x,animation:_?"":"none","--n-bezier":r,"--n-color-start":l,"--n-color-end":i}}))}},render(){const{repeat:t,style:e,mergedClsPrefix:n,$attrs:s}=this,o=p("div",m({class:`${n}-skeleton`,style:e},s));return t>1?p(g,null,function(t){const e=[];for(let n=0;n<t;++n)e.push(null);return e}(t).map((t=>[o,"\n"]))):o}}),J={class:"relative"},Q={class:"absolute inset-0 flex flex-col items-center justify-center"},W=y("p",{class:"mt-4"}," 评论加载中... ",-1),X=a({__name:"Comment",props:{post:{}},setup(t){const n=t,{isDark:s}=x(),o=h();function r(){var t,e,n;null==(e=null==(t=o.value)?void 0:t.firstChild)||e.remove();const r=document.createElement("script");r.async=!0,r.setAttribute("src","https://utteranc.es/client.js"),r.setAttribute("repo","liuly0322/liuly0322.github.io"),r.setAttribute("issue-term","pathname"),r.setAttribute("crossorigin","anonymous"),s.value?r.setAttribute("theme","github-dark"):r.setAttribute("theme","github-light"),null==(n=o.value)||n.appendChild(r)}return f(r),b((()=>n.post),r),b(s,((t,e)=>{var n,s,r;t!==e&&(null==(r=null==(s=null==(n=o.value)?void 0:n.querySelector("iframe"))?void 0:s.contentWindow)||r.postMessage({type:"set-theme",theme:t?"github-dark":"github-light"},"https://utteranc.es"))})),(t,n)=>(S(),v("div",J,[y("div",{ref_key:"vueUtterances",ref:o,class:"min-h-268px relative z-2"},null,512),y("div",Q,[_(k(e),{style:{color:"#18a058"}}),W])]))}}),Y={class:"overflow-hidden my-12 p-4 border-t border-b"},Z={key:0,class:"float-left my-2"},K={key:1,class:"float-right my-2"},tt=a({__name:"PostFooter",props:{post:{}},setup(t){const e=t,{summary:n}=$(),s=u((()=>n.findIndex((t=>t.url===e.post))));return(t,e)=>{const o=w("router-link");return S(),v("div",Y,[k(s)>0?(S(),v("div",Z,[_(o,{to:`/posts/${encodeURIComponent(k(n)[k(s)-1].url)}`},{default:C((()=>[z(" 上一篇："+I(k(n)[k(s)-1].title),1)])),_:1},8,["to"])])):P("",!0),k(s)+1<k(n).length?(S(),v("div",K,[_(o,{to:`/posts/${encodeURIComponent(k(n)[k(s)+1].url)}`},{default:C((()=>[z(" 下一篇："+I(k(n)[k(s)+1].title),1)])),_:1},8,["to"])])):P("",!0)])}}}),et={class:"md-blog m-auto text-left"},nt={class:"border-b pb-4"},st=a({__name:"PostHeader",props:{post:{}},setup:t=>(t,e)=>{const n=w("router-link"),s=U;return S(),v("div",et,[y("h1",null,I(t.post.title),1),y("p",null,I(t.post.date),1),y("div",nt,[(S(!0),v(g,null,j(t.post.tags,(t=>(S(),A(s,{key:t,class:"mr-2 mb-4",type:"info",round:""},{default:C((()=>[_(n,{to:`/tags/${encodeURIComponent(t)}`,class:"!text-inherit !no-underline"},{default:C((()=>[z(I(t),1)])),_:2},1032,["to"])])),_:2},1024)))),128))])])}});function ot(t,e){return t+Math.round(Math.random()*(e-t))}async function rt(t,e){const n=(r=t.split("/"),r.pop()||r.pop()||"").split(".")[0],s=sessionStorage.getItem(n),o=function(t){const e=Date.now(),n=sessionStorage.getItem(`${t}__time`)??"0";return(e-Number(n))/1e3}(n);var r;if(s&&o<3600)return s;const a=await async function(t,e){const n=new AbortController;return e&&e((()=>n.abort())),fetch(`/posts/${t}.htm`,{signal:n.signal}).then((t=>t.text()))}(n,e);return sessionStorage.setItem(n,a),sessionStorage.setItem(`${n}__time`,Date.now().toString()),a}const{summary:at}=$();function lt(t){return at.find((e=>t.includes(e.url)))??{url:"",title:"",tags:[],date:""}}const it={class:"lg:card px-6"},ut={class:"mt-1.6em text-left"},ct=["innerHTML"],dt=a({__name:"[post]",props:{post:{}},setup(e){const n=e,{getCachedPostData:s,getCurrentPostSummary:o}={getCachedPostData:rt,getCurrentPostSummary:lt},r=u((()=>o(n.post))),a=u((()=>`${r.value.title} | llyのblog`));R(a);const{setToc:l,enableToc:i}=T();B((()=>{i.value=!1}));const c=h(!0),d=M((async t=>{c.value=!0;const e=await s(n.post,t);return c.value=!1,e}),""),{scroll:p,deferScroll:m}=O(),f=h();return E((()=>{n.post&&p({left:0,top:0})})),b(d,(()=>{D((()=>{m(),f.value&&l(f.value)}))})),(e,n)=>{const s=st,o=G,a=tt,l=X,i=t;return S(),v("article",it,[_(s,{post:k(r)},null,8,["post"]),L(y("div",ut,[(S(),v(g,null,j(4,(t=>(S(),v(g,{key:t},[_(o,{text:"",repeat:k(ot)(1,3)},null,8,["repeat"]),_(o,{text:"",style:H(`width: ${k(ot)(20,80)}%`)},null,8,["style"])],64)))),64))],512),[[N,k(c)]]),L(y("div",null,[y("div",{ref_key:"postContentEle",ref:f,class:"md-blog m-auto text-left",innerHTML:k(d)},null,8,ct),_(a,{post:k(r).url},null,8,["post"]),_(l,{post:k(r)},null,8,["post"]),_(i)],512),[[N,!k(c)]])])}}});export{dt as default};
